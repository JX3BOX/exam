(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c0c866aa"],{3506:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"c-take-question"},[t.currentQuestion?s("div",{staticClass:"c-take-question-content"},[s("h3",{staticClass:"q-text"},[void 0!==t.isCorrect?s("i",{class:{"el-icon-success":!0===t.isCorrect,"el-icon-error":!1===t.isCorrect}}):t._e(),s("Article",{attrs:{content:t.currentQuestion.title}})],1),s("div",{staticClass:"q-attr"},[s("span",{staticClass:"q-attr-hint"},[t._v(t._s(t.isMultiple?"多选题":"单选题"))]),s("el-rate",{attrs:{disabled:"","text-color":"#ff9900","score-template":"{value}"},model:{value:t.currentQuestion.hardStar,callback:function(e){t.$set(t.currentQuestion,"hardStar",e)},expression:"currentQuestion.hardStar"}}),s("span",{staticClass:"q-attr-author"},[t._v(" 提交人： "),s("el-link",{attrs:{href:t.paperAuthorLink,target:"_blank",underline:!1}},[s("el-avatar",{attrs:{src:t.paperAuthorAvatar}}),t._v(" "+t._s(t.currentQuestion.createUser)+" ")],1)],1),s("span",{staticClass:"q-attr-author"},[t._v(" 试卷标签： "),s("span",{staticClass:"c-exam-attr-value"},t._l(JSON.parse(t.currentQuestion.tags),(function(e){return s("el-tag",{key:e,attrs:{size:"medium"}},[t._v(t._s(e))])})),1)])],1),t.isMultiple?[s("el-checkbox-group",{model:{value:t.chosenOptions,callback:function(e){t.chosenOptions=e},expression:"chosenOptions"}},t._l(JSON.parse(t.currentQuestion.options),(function(e,n){return s("el-checkbox",{key:n,class:{"is-correct-answer":t.isCorrectAnswerClass(n),"is-wrong-answer":t.isWrongAnswerClass(n)},attrs:{label:n,border:"",disabled:t.isSubmitted}},[t._v(" "+t._s(String.fromCharCode(65+n))+". "),s("Article",{attrs:{content:e}})],1)})),1)]:[s("el-radio-group",{model:{value:t.chosenOptions,callback:function(e){t.chosenOptions=e},expression:"chosenOptions"}},t._l(JSON.parse(t.currentQuestion.options),(function(e,n){return s("el-radio",{key:n,class:{"is-correct-answer":t.isCorrectAnswerClass(n),"is-wrong-answer":t.isWrongAnswerClass(n)},attrs:{label:n,border:"",disabled:t.isSubmitted}},[t._v(" "+t._s(String.fromCharCode(65+n))+". "),s("Article",{attrs:{content:e}})],1)})),1)],s("div",{staticClass:"c-exam-take-btn"},[t.isSubmitted||t.loading||!t.currentQuestion?t._e():s("el-button",{attrs:{type:"success",disabled:null===t.chosenOptions||""===JSON.stringify(t.chosenOptions)||"[]"===JSON.stringify(t.chosenOptions)},on:{click:t.preSubmitQuestion}},[t._v("提交")])],1),t.questionAnswer?s("div",{staticClass:"q-whyami"},[s("h3",[t._v("解析")]),s("div",{staticClass:"q-whyami-content",domProps:{innerHTML:t._s(t.questionAnswer.whyami)}})]):t._e()],2):t._e(),s("div",{staticClass:"m-exam-comment"},[s("el-divider",{attrs:{"content-position":"left"}},[t._v("讨论")]),s("Comment",{attrs:{id:t.id,category:"question"}})],1)])},r=[],i=(s("99af"),s("caad"),s("d81d"),s("ac1f"),s("2532"),s("5319"),s("408b")),o=s("64c7"),a=s("ee8f"),c=s("a974"),u=s("85e4"),l=s("e494"),h=s("23d8"),d={name:"TakeQuestion",components:{Article:c["a"],Comment:h["a"]},data:function(){return{loading:!1,chosenOptions:null,currentQuestion:null,questionid:null,showAnswer:!1,isSubmitted:!1,questionAnswer:null,correctAnswer:null,isCorrect:void 0,authorAvatarUrl:""}},computed:{isMultiple:function(){return"checkbox"===this.currentQuestion.type},paperAuthorAvatar:function(){return Object(u["showAvatar"])(this.authorAvatarUrl,"s")},paperAuthorLink:function(){return Object(u["authorLink"])(this.currentQuestion.createUserId)},id:function(){return this.$route.params.id}},mounted:function(){"localhost"!=location.hostname&&this.checkLogin(),Object(l["a"])("question",this.$route.params.id)},methods:{checkLogin:function(){a["User"].isLogin()?this.getQuestionId():(this.$message.error("请先登录"),a["User"].destroy(),setTimeout((function(){a["User"].toLogin()}),1e3))},getAuthorAvatar:function(t){var e=this;Object(i["a"])("https://server.jx3box.com/user/info?uid=".concat(t),"GET").then((function(t){10024===t.code&&(e.authorAvatarUrl=t.data.avatar)})).catch((function(t){console.log(t)}))},getQuestionId:function(){var t=this;if(!this.$route.params.id)return this.$message.error("题目不存在！"),setTimeout((function(){t.$router.go("-1")}),1e3),!1;this.questionid=this.$route.params.id,this.getQuestion()},getQuestion:function(){var t=this;if(this.loading=!0,!this.$route.params.questionInfo)return this.$message.error("进入方法非法！请从试题列表页重新进入"),setTimeout((function(){t.$router.replace("/qlist")}),1e3),!1;this.currentQuestion=this.$route.params.questionInfo,"checkbox"===this.currentQuestion.type?this.chosenOptions=[]:this.chosenOptions=null,this.loading=!1,this.getAuthorAvatar(this.currentQuestion.createUserId)},preSubmitQuestion:function(){var t=[],e=this.chosenOptions,s=JSON.parse(this.currentQuestion.options);if(null===e)return!1;if("number"!==typeof e){if(0===e.length)return!1;t=e.map((function(t){return s[t]}))}else t=[s[e]];this.submitQuestion(t)},submitQuestion:function(t){var e=this,s=Object(i["b"])(o["__next"],"api/question/user-exam-paper/q/".concat(this.questionid,"/answer"));this.isSubmitted=!0,this.loading=!0,Object(i["a"])(s,"POST",!0,t).then((function(t){e.questionAnswer=t.question,e.correctAnswer=t.question.answerList,e.isCorrect=t.right})).catch((function(t){switch(e.isSubmitted=!1,t.code){case-1:e.$message.error(t.msg);break;case 9999:e.$message.error("登录失效, 请重新登录"),a["User"].destroy(),setTimeout((function(){a["User"].toLogin()}),1e3);break;default:e.$message.error("[".concat(t.code,"]").concat(t.msg))}})).then((function(){e.loading=!1}))},isCorrectAnswerClass:function(t){return!!this.correctAnswer&&this.correctAnswer.includes(t)},isWrongAnswerClass:function(t){if(this.correctAnswer&&!this.correctAnswer.includes(t)&&null!==this.chosenOptions){if(this.chosenOptions===t)return!0;if("number"!==typeof this.chosenOptions)return this.chosenOptions.includes(t)}return!1}}},p=d,m=(s("902d"),s("2877")),f=Object(m["a"])(p,n,r,!1,null,null,null);e["default"]=f.exports},"902d":function(t,e,s){"use strict";var n=s("bcb1"),r=s.n(n);r.a},bcb1:function(t,e,s){},d81d:function(t,e,s){"use strict";var n=s("23e7"),r=s("b727").map,i=s("1dde"),o=s("ae40"),a=i("map"),c=o("map");n({target:"Array",proto:!0,forced:!a||!c},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},e494:function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));var n=s("bc3a"),r=s.n(n),i=s("64c7");i["__next"];var o=i["__next"]+"api/summary-any/";function a(t,e){return r.a.get(o+t+"-"+e,{params:{type:t,actions:"views"}})}i["__next"]}}]);
//# sourceMappingURL=chunk-c0c866aa.c290f8c3.js.map