(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1dd9e2ee"],{3506:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"c-take-question"},[e.currentQuestion?s("div",{staticClass:"c-take-question-content"},[s("Article",{attrs:{content:e.currentQuestion.title}}),s("div",{staticClass:"q-attr"},[s("span",{staticClass:"q-attr-hint"},[e._v(e._s(e.isMultiple?"多选题":"单选题"))]),s("el-rate",{attrs:{disabled:"","text-color":"#ff9900","score-template":"{value}"},model:{value:e.currentQuestion.hardStar,callback:function(t){e.$set(e.currentQuestion,"hardStar",t)},expression:"currentQuestion.hardStar"}}),s("span",{staticClass:"q-attr-author"},[e._v(" 提交人： "),s("b",[e._v(e._s(e.currentQuestion.createUser))])])],1),e.isMultiple?[s("el-checkbox-group",{model:{value:e.chosenOptions,callback:function(t){e.chosenOptions=t},expression:"chosenOptions"}},e._l(JSON.parse(e.currentQuestion.options),(function(t,n){return s("el-checkbox",{key:n,class:{"is-correct-answer":e.isCorrectAnswerClass(e.currentQuestion.id,n),"is-wrong-answer":e.isWrongAnswerClass(e.currentQuestion.id,n)},attrs:{label:n,border:"",disabled:e.isSubmitted}},[e._v(" "+e._s(String.fromCharCode(65+n))+". "),s("Article",{attrs:{content:t}})],1)})),1)]:[s("el-radio-group",{model:{value:e.chosenOptions,callback:function(t){e.chosenOptions=t},expression:"chosenOptions"}},e._l(JSON.parse(e.currentQuestion.options),(function(t,n){return s("el-radio",{key:n,class:{"is-correct-answer":e.isCorrectAnswerClass(e.currentQuestion.id,n),"is-wrong-answer":e.isWrongAnswerClass(e.currentQuestion.id,n)},attrs:{label:n,border:"",disabled:e.isSubmitted}},[e._v(" "+e._s(String.fromCharCode(65+n))+". "),s("Article",{attrs:{content:t}})],1)})),1)],s("div",{staticClass:"c-exam-take-btn"},[e.isSubmitted||e.loading||!e.currentQuestion?e._e():s("el-button",{attrs:{type:"success",disabled:null===e.chosenOptions||""===JSON.stringify(e.chosenOptions)||"[]"===JSON.stringify(e.chosenOptions)},on:{click:e.preSubmitQuestion}},[e._v("提交")])],1),e.questionAnswer?s("div",{staticClass:"q-whyami"},[s("h3",[e._v("解析")]),s("div",{staticClass:"q-whyami-content",domProps:{innerHTML:e._s(e.questionAnswer.whyami)}})]):e._e()],2):e._e()])},i=[],r=(s("99af"),s("caad"),s("d81d"),s("ac1f"),s("2532"),s("5319"),s("408b")),o=s("64c7"),u=s("ee8f"),c=s("a974"),a={name:"TakeQuestion",components:{Article:c["a"]},data:function(){return{loading:!1,chosenOptions:null,currentQuestion:null,questionid:null,showAnswer:!1,isSubmitted:!1,questionAnswer:null,correctAnswer:null}},computed:{isMultiple:function(){return"checkbox"===this.currentQuestion.type}},mounted:function(){this.checkLogin()},methods:{checkLogin:function(){u["User"].isLogin()?(this.getQuestionId(),this.getQuestion()):(this.$message.error("请先登录"),u["User"].destroy(),setTimeout((function(){u["User"].toLogin()}),1e3))},getQuestionId:function(){var e=this;if(!this.$route.params.id)return this.$message.error("题目不存在！"),setTimeout((function(){e.$router.go("-1")}),1e3),!1;console.log(this.$route),this.questionid=this.$route.params.id,this.getQuestion()},getQuestion:function(){var e=this;if(this.loading=!0,!this.$route.params.questionInfo)return this.$message.error("进入方法非法！请从试题列表页重新进入"),setTimeout((function(){e.$router.replace("/qlist")}),1e3),!1;this.currentQuestion=this.$route.params.questionInfo,this.loading=!1},preSubmitQuestion:function(){var e=[],t=this.chosenOptions,s=JSON.parse(this.currentQuestion.options);if(null===t)return!1;if("number"!==typeof t){if(0===t.length)return!1;e=t.map((function(e){return s[e]}))}else e=[s[t]];this.submitQuestion(e)},submitQuestion:function(e){var t=this,s=Object(r["b"])(o["__next"],"api/question/user-exam-paper/q/".concat(this.questionid,"/answer"));this.isSubmitted=!0,this.loading=!0,Object(r["a"])(s,"POST",!0,e).then((function(e){console.log(e),t.questionAnswer=e.question})).catch((function(e){switch(t.isSubmitted=!1,e.code){case-1:t.$message.error(e.msg);break;case 9999:t.$message.error("登录失效, 请重新登录"),u["User"].destroy(),setTimeout((function(){u["User"].toLogin()}),1e3);break;default:t.$message.error("[".concat(e.code,"]").concat(e.msg))}})).then((function(){t.loading=!1}))},isCorrectAnswerClass:function(e,t){return!!this.correctAnswer&&this.correctAnswer.includes(t)},isWrongAnswerClass:function(e,t){if(this.correctAnswer&&!this.correctAnswer.includes(t)&&null!==this.userAnswers[e]){if(this.userAnswers[e]===t)return!0;if("number"!==typeof this.userAnswers[e])return this.userAnswers[e].includes(t)}return!1}}},l=a,d=(s("902d"),s("2877")),h=Object(d["a"])(l,n,i,!1,null,null,null);t["default"]=h.exports},"902d":function(e,t,s){"use strict";var n=s("bcb1"),i=s.n(n);i.a},bcb1:function(e,t,s){},d81d:function(e,t,s){"use strict";var n=s("23e7"),i=s("b727").map,r=s("1dde"),o=s("ae40"),u=r("map"),c=o("map");n({target:"Array",proto:!0,forced:!u||!c},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-1dd9e2ee.f94e103f.js.map